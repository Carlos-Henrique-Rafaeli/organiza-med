<section class="row justify-content-center">
  <div class="col-md-11 col-xl-8">
    <h2>Listagem de Atividades Médicas</h2>

    <div class="row g-1 mt-3">
      <a mat-flat-button class="col-md-6 col-xl-2" routerLink="cadastrar">
        <mat-icon>add</mat-icon>
        Cadastrar
      </a>
    </div>

    <hr />

    <div class="row g-3">
      @for (atividade of atividade$ | async; track $index) {
        <div class="col-md-6 col-xl-4">
          <mat-card class="p-1">
            <mat-card-header>
              <mat-card-title>{{ atividade.tipoAtividade }}</mat-card-title>
            </mat-card-header>

            <mat-card-content style="min-height: 40px">
              <mat-card-subtitle>Paciente: {{ atividade.paciente.nome }}</mat-card-subtitle>
            </mat-card-content>

            @if (atividade.medicos.length <= 1) {
              <mat-card-content style="min-height: 40px">
                <mat-card-subtitle>Médico: {{ atividade.medicos[0].nome }}</mat-card-subtitle>
              </mat-card-content>
            } @else {
              <mat-card-content style="min-height: 40px">
                <mat-card-subtitle>Médicos: </mat-card-subtitle>
                @for (medico of atividade.medicos; track $index) {
                  <p class="m-0">{{ medico.nome }}</p>
                }
              </mat-card-content>
            }

            <mat-card-actions align="end">
              <a [routerLink]="['editar', atividade.id]" mat-icon-button
                ><mat-icon>edit</mat-icon></a
              >
              <a [routerLink]="['excluir', atividade.id]" mat-icon-button class="ms-1"
                ><mat-icon>delete</mat-icon></a
              >
            </mat-card-actions>
          </mat-card>
        </div>
      }
    </div>
  </div>
</section>
